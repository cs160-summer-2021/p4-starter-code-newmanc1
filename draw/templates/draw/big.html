{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script type="text/javascript" src="{% static 'draw/vendor/jquery/jquery-3.3.1.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'draw/vendor/paper/paper-full.min.js' %}"></script>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/product/">
    <script type="text/javascript" src="{% static 'draw/vendor/paper/paper-full.min.js' %}"></script>

    <script src="https://kit.fontawesome.com/f2c150d561.js"
        crossorigin="anonymous">
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Product example Â· Bootstrap v5.0</title>




<meta name="theme-color" content="#7952b3">


    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }

        .maestroLine {
            height: 90px;
            background-color: pink;
            
            text-align: center;
            
            
            font-family: Didot;
            font-size: 180px;
        
        }
        .redLine {

        }       

        .musicSheetDiv {
            
        }

        .musicSheetA {
            
        }

        .happy {
            display: none;
            width: 80px;
            height: 80px;
        }

        #musicSheet1A {
            display: inline;
        }
        #orchestraLayout1B {
            display: inline;
        }

        #musicSheet2A {
            
            display: none;
        }
        #orchestraLayout2B {
            
            display: none;
        }

        #musicSheet3A {
            
            display: none;
        }
        #orchestraLayout3B {
            
            display: none;
        }

        #musicSheet4A {
            
            display: none;
        }
        #orchestraLayout4B {
            
            display: none;
        }

        .navBar {
            height:90px;
        }

        .navBar1Button {
            height: 100px;
            width: 100px;
            margin-left: 20px;
            margin-right: 20px;
        }
        .navBar2Button {
            height: 100px;
            width: 100px;
            margin-left: 20px;
            margin-right: 20px;
        }
        .navBar3Button {
            height: 100px;
            width: 100px;
            margin-left: 20px;
            margin-right: 20px;
        }
        .navBar4Button {
            height: 100px;
            width: 100px;
            margin-left: 20px;
            margin-right: 20px;
        }

        #navBarBox {
            position: relative;
            
            height: 100px;
            width: 100px;
            background-color: lightblue;
            display: none;
        }

        #video1 {
            display: none;
        }
        #video2 {
            display: none;
        }
        #video3 {
            display: none;
        }
        #video4 {
            display: none;
        }

        
    </style>

    
    <!-- Custom styles for this template -->
  </head>
  <body>
    
<header class="site-header text-center sticky-top py-1 ">
    <div class="row text-center fw-bold">
        
        <div class="col text-center maestroLine container flex-column flex-md-row justify-content-between" style="font-size: 80px">
            <h1 class="text-center fw-bold" id="maestroMessage" style="font-size: 72px"> Maestro: Hit it!!</h1>
            
        </div>
    </div>
</header>
<button class="navBar1Button" id="chatButton1">
    <i class="fas fa-comment-dots fa-3x" id="chat"></i>

</button>
<span class="message" id="message1" style="display: none">
    <input type="text" id="chatInput1" style="height:80px; width: 400px; font-size: 60px">
    <input type="submit" id="chatSubmit1" style="font-size: 48px">
</span>

<main>

<div class="half " style="display:flex">
    <img class="musicSheetA" id="musicSheet1A" style="width:1420px" height="1350px" src="https://drive.google.com/uc?export=view&id=1Xr-UWVaiMWkFY6PLuwV-wQ6u_Q3Lmg69">
    <div>
        <img id="orchestraLayout1B" style="width:1420px" height="1000px" src="https://drive.google.com/uc?export=view&id=17Wzq-wM1YYbarf1HAn0kS6ORLvcb-cUh">
       
        
            
            
            
        </div>
        <img id="video1" class="happy" style="position: relative; left: -150px; top: 110px;" src="https://drive.google.com/uc?export=view&id=1p67VmLjpYNqvx7X99ZE8CZTh2z0xzg6B">
        <img id="video2" class="happy" style="position: relative; left: -221px; top: 720px;" src="https://drive.google.com/uc?export=view&id=1p67VmLjpYNqvx7X99ZE8CZTh2z0xzg6B">
        <img id="video3" class="happy" style="position: relative; left: -901px; top: 575px;" src="https://drive.google.com/uc?export=view&id=1p67VmLjpYNqvx7X99ZE8CZTh2z0xzg6B">
        <img id="video4" class="happy" style="position: relative; left: -1371px; top: 745px;"src="https://drive.google.com/uc?export=view&id=1p67VmLjpYNqvx7X99ZE8CZTh2z0xzg6B">
    </div>
    
</div>
<div class="half " style="display:flex">
    <img class="musicSheetA" id="musicSheet2A" style="width:1420px" height="1350px" src="https://drive.google.com/uc?export=view&id=17BuSFDEi9pmwbqyrD-QCt2zoKBEwhEh5">
    <img id="orchestraLayout2B" style="width:1420px" height="1000px" src="https://drive.google.com/uc?export=view&id=17Wzq-wM1YYbarf1HAn0kS6ORLvcb-cUh">
</div>
<div class="half " style="display:flex">
    <img class="musicSheetA" id="musicSheet3A" style="width:1420px" height="1350px" src="https://drive.google.com/uc?export=view&id=1YjZMBjj3giowRCBx-scdpLXhrzt75Y17">
    <img id="orchestraLayout3B" style="width:1420px" height="1000px" src="https://drive.google.com/uc?export=view&id=17Wzq-wM1YYbarf1HAn0kS6ORLvcb-cUh">
</div>
<div class="half " style="display:flex">
    <img class="musicSheetA" id="musicSheet4A" style="width:1420px" height="1350px" src="https://drive.google.com/uc?export=view&id=1MiMuSVoV5TlGnM0_LDLF26HOsnPl5xpC">
    <img id="orchestraLayout4B" style="width:1420px" height="1000px" src="https://drive.google.com/uc?export=view&id=17Wzq-wM1YYbarf1HAn0kS6ORLvcb-cUh">
</div>
<div class="half " style="display:flex">
    
</div>
</main>




    <script>

        // setting up the canvas and one paper tool
    var canvas = document.getElementById('myCanvas');
    paper.setup(canvas);
    var tool = new paper.Tool();
    
    var uid = Date.now() % 10000;
    const map1 = new Map();
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const size = urlParams.get('size');
    var path = new paper.Path();
    // used https://www.sitepoint.com/get-url-parameters-with-javascript/ to get these url parameters
    var currMusicSheet = 1;
    var currNavBar = 1;

    // getting the URL (you may want to use for Exercise 3)
    var url = window.location.href;

    var socket = new WebSocket(
        'ws://' + window.location.host + '/ws/draw');

    tool.onMouseMove = function(event) { //http://paperjs.org/reference/tool/ path examples
       path.add(event.point);
       console.log("asd");
       // You may need to add code here if you want to pass any other information.
       socket.send("{\"x\" : " + event.point.x + ", \"y\" : " + event.point.y + ", \"uid\" : " + uid + "}" );
       
       
    }

    socket.onmessage = function(receivedMessage) {
        received = receivedMessage.data;
        console.log("Received: " + receivedMessage.data);
        // You will probably want to add some code here to draw more lines.
        if(received.substring(0, 12) === "toggle video") {
            let videoNumber = received.substring(13);
            if(map1.has(videoNumber)) {
                toggleVisibility("video" + map1.get(videoNumber));
            } else {
                map1.set(videoNumber, map1.size + 1);
                toggleVisibility("video" + map1.get(videoNumber));
            }
            
            console.log(videoNumber);
        }
        if(received.substring(0, 7) === "Maestro") {
            console.log("ads");
            document.getElementById("maestroMessage").innerHTML = received;
        }
    }

    socket.onclose = function(e) {
        console.error('Chat socket closed unexpectedly');
    };

    
    function changeMusicSheet(number) {
        let newSheetA = document.getElementById("musicSheet" + number + "A");
        let newSheetB = document.getElementById("orchestraLayout" + number + "B");
        let currSheetA = document.getElementById("musicSheet" + currMusicSheet + "A");
        let currSheetB = document.getElementById("orchestraLayout" + currMusicSheet + "B");
        currSheetA.style.display = "none";
        currSheetB.style.display = "none";
        newSheetA.style.display = "inline";
        newSheetB.style.display = "inline";
        currMusicSheet = number;
    }

    function changeNavBar(number) {
        let newNav = document.getElementById("navBar" + number);
        let currNav = document.getElementById("navBar" + currNavBar);
        currNav.style.display = "none";
        newNav.style.display = "inline";
        
        currNavBar = number;
    }
    
    function toggleVisibility(id) {
        let obj = document.getElementById(id);
        if(obj.style.display === "inline") {
            obj.style.display = "none";
        } else {
            obj.style.display = "inline";
        }
    }
    
    document.getElementById("chatButton1").addEventListener("click", function() {
        toggleVisibility("message1");      
    });
    document.getElementById("chatSubmit1").addEventListener("click", function() {
        socket.send("Maestro: " + document.getElementById("chatInput1").value);
        console.log(document.getElementById("chatInput1").value)
        document.getElementById("chatInput1").value="";
        toggleVisibility("message1");      
    });
    document.getElementById("chatButton2").addEventListener("click", function() {
        toggleVisibility("message2");      
    });
    document.getElementById("chatSubmit2").addEventListener("click", function() {
        socket.send(document.getElementById("chatInput2").value);
        console.log(document.getElementById("chatInput2").value)
        document.getElementById("chatInput2").value="";
        toggleVisibility("message2");      
    });
    document.getElementById("chatButton3").addEventListener("click", function() {
        toggleVisibility("message3");      
    });
    document.getElementById("chatSubmit3").addEventListener("click", function() {
        socket.send(document.getElementById("chatInput3").value);
        console.log(document.getElementById("chatInput3").value)
        document.getElementById("chatInput3").value="";
        toggleVisibility("message3");      
    });
    document.getElementById("chatButton4").addEventListener("click", function() {
        toggleVisibility("message4");      
    });
    document.getElementById("chatSubmit4").addEventListener("click", function() {
        socket.send(document.getElementById("chatInput4").value);
        console.log(document.getElementById("chatInput4").value)
        document.getElementById("chatInput4").value="";
        toggleVisibility("message4");      
    });
    
    </script>

      
  </body>
</html>
